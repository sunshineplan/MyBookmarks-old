{% extends 'base.html' %}

{% block header %}
<h3>{% block title %}Add/Edit Bookmark{% endblock %}</h3>
<hr>
{% endblock %}

{% block content %}
<form method='POST'>
  <script>
    $(function(){
      $('input[type="url"]').blur( function(){
        var string = $(this).val();
        if (!string.match(/^https?:/) && string.length) {
          string = 'http://' + string;
          $(this).val(string)
        }
      });
    });
  </script>
  <div class='form-group'>
    <label for='bookmark'>Bookmark</label>
    <input class='form-control' name='bookmark' id='bookmark' value="{{ request.form['bookmark'] or bookmark['bookmark'] }}" required>
  </div>
  <div class='form-group'>
    <label for='url'>URL</label>
    <input class='form-control' type='url' name='url' id='url' value="{{ request.form['url'] or bookmark['url'] }}" required>
  </div>
  <div class='form-group'>
    <label for='category'>Category</label>
    <input class='form-control' list='category-list' name='category' id='category' value="{{ bookmark['category'] or category}}">
    <datalist id='category-list'>
    </datalist>
  </div>
  <input type='submit' value='{% if id == 0 %}Add{% else %}Save{% endif %}' class='btn btn-primary'>
  <a class='btn btn-primary' href='javascript:history.go(-1);'>Cancel</a>
</form>
{% if id != 0 %}
<hr>
<form action="{{ url_for('bookmark.delete_bookmark', id=id) }}" method='POST'>
  <input type='submit' value='Delete' class='btn btn-danger' onclick="return confirm('Are you sure?');">
</form>
{% endif %}
{% endblock %}
